location ^~ /dspace {
    rewrite ^/dspace/?(.*) /$1 break;
    proxy_pass %DSPACE_URL%;
    # preserve the original Host header (useful for DSpace and CORS checks)
    proxy_set_header Host $host;
    proxy_set_header Cookie $http_cookie;
    # rewrite cookie paths so that cookies set by the backend under /server
    # (like DSPACE-XSRF-COOKIE; Path=/server) are rewritten to /dspace,
    # allowing the browser to send them back on /dspace/api/... requests.
    proxy_cookie_path /server /dspace;
    # dspace seems to take a lot of time to create items, so even when successful,
    # it returns a 504 to elab because it took more than 30sec. So we increase the timeout
    # proxy_connect_timeout 300s;
    # proxy_send_timeout 300s;
    # proxy_read_timeout 300s;
}
